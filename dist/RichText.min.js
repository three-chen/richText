!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).RichText=e()}(this,(function(){"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}function n(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function l(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,l)}c((o=o.apply(t,e||[])).next())}))}function o(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&l[0]?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,o=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=e.call(t,a)}catch(t){l=[6,t],o=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}"function"==typeof SuppressedError&&SuppressedError;var i=function(){function t(t,e,n){var o=this;o._el=document.createElement("button"),o._id=t.id,o._label=t.label,o._icon=e,o.isActivate=!1,o._protobtnClick=n,o._protobtnMouseEnter=function(){o._el.classList.add("richText-toolbar-button-hover"),o._el.children[0].classList.remove("richText-toolbar-button-tooltip-inactive"),o._el.children[0].classList.add("richText-toolbar-button-tooltip-active")},o._protobtnMouseLeave=function(){o._el.classList.remove("richText-toolbar-button-hover"),o._el.children[0].classList.remove("richText-toolbar-button-tooltip-active"),o._el.children[0].classList.add("richText-toolbar-button-tooltip-inactive")},o.init(o._el,t.type)}return t.prototype.init=function(t,e){var n=this;t.classList.add("richText-toolbar-button"),t.id=n._id;var o=document.createElement("div");o.innerText=n._label,o.classList.add("richText-toolbar-button-tooltip"),o.classList.add("richText-toolbar-button-tooltip-inactive"),t.appendChild(o),t.addEventListener("mouseenter",n._protobtnMouseEnter),t.addEventListener("mouseleave",n._protobtnMouseLeave);var i=document.createElement("div");switch(i.classList.add("richText-toolbar-button-icon"),i.innerHTML=n._icon,t.appendChild(i),e){case"button":t.addEventListener("click",n._protobtnClick);break;case"input":var r=document.createElement("input");r.classList.add("richText-toolbar-button-input"),r.type="file",r.accept="image/*",t.appendChild(r),t.addEventListener("click",n._protobtnClick)}},t.prototype.setSelection=function(t){var e=window.getSelection();if(null===e.focusNode){var n=document.createRange();n.selectNodeContents(t),n.collapse(!1),e.removeAllRanges(),e.addRange(n)}},t}(),r=null;function a(){return r}var l=new(function(t){function n(){var e=t.call(this,{id:"bold",label:"bold",type:"button"},'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"></path><path fill="currentColor" d="M8 11h4.5a2.5 2.5 0 1 0 0-5H8v5zm10 4.5a4.5 4.5 0 0 1-4.5 4.5H6V4h6.5a4.5 4.5 0 0 1 3.256 7.606A4.498 4.498 0 0 1 18 15.5zM8 13v5h5.5a2.5 2.5 0 1 0 0-5H8z"></path></svg>',(function(){var t=a();t&&(e.setSelection(t),document.execCommand("bold",!1,null))}))||this;return e}return e(n,t),n}(i)),c=new(function(t){function n(){var e=t.call(this,{id:"ul",label:"ul",type:"button"},'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"></path><path fill="currentColor" d="M8 4h13v2H8V4zM4.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 6.9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z"></path></svg>',(function(){var t=a();t&&(e.setSelection(t),document.execCommand("insertUnorderedList",!1,null))}))||this;return e}return e(n,t),n}(i)),u=new(function(t){function i(){var e=t.call(this,{id:"image",label:"image",type:"input"},'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><line x1="15" y1="8" x2="15.01" y2="8"></line><rect x="4" y="4" width="16" height="16" rx="3"></rect><path d="M4 15l4 -4a3 5 0 0 1 3 0l5 5"></path><path d="M14 14l1 -1a3 5 0 0 1 3 0l2 2"></path></svg>',(function(){return n(e,void 0,void 0,(function(){var t,e,i=this;return o(this,(function(r){return t=this._el.lastChild,e=function(e){return n(i,void 0,void 0,(function(){var n;return o(this,(function(o){switch(o.label){case 0:return console.log("handleChange",t.value),(n=e.target.files[0])?[4,this.getLocalImage(n)]:[3,2];case 1:o.sent(),t.value="",o.label=2;case 2:return[2]}}))}))},t.addEventListener("change",e,{once:!0}),t.click(),[2]}))}))}))||this;return e.fileOpened=!1,e}return e(i,t),i.prototype.getLocalImage=function(t){return n(this,void 0,void 0,(function(){var e,n;return o(this,(function(o){return e=this,(n=new FileReader).onload=function(t){var n=t.target.result;e.showImage(n)},n.readAsDataURL(t),[2]}))}))},i.prototype.showImage=function(t){var e=a();e&&(this.setSelection(e),document.execCommand("insertImage",!1,t))},i}(i)),s=function(){function t(t){this._toolbar=document.createElement("div"),this.init(this._toolbar),t.appendChild(this._toolbar)}return t.prototype.init=function(t){t.classList.add("richText-toolbar"),this.addButton(l),this.addButton(c),this.addButton(u)},t.prototype.addButton=function(t){this._toolbar.appendChild(t._el)},t}(),d=function(){function t(t){var e;this._editor=null,this._editor=document.createElement("div"),this.init(this._editor),e=this._editor,r=e,t.appendChild(this._editor)}return t.prototype.init=function(t){t.classList.add("richText-editor"),t.contentEditable="true"},t.prototype.getInnerHTML=function(){return this._editor.innerHTML},t}();return function(){function t(){}return t.prototype.mount=function(t){this._el=t,this._editor=new d(this._el),this._toolbar=new s(this._el)},t.prototype.getHTML=function(){return this._editor.getInnerHTML()},t}()}));
//sea my source code at https://github.com/three-chen/richText